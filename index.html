
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë¶ˆëŸ‰ ëŒ€ë¶„ë¥˜/ì¤‘ë¶„ë¥˜ Bar Chart</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* CSS ìŠ¤íƒ€ì¼ ìƒëµ */
  </style>
</head>
<body>
  <h2>ğŸ“ŠëŒ€ë¶„ë¥˜/ì¤‘ë¶„ë¥˜ë³„[í´ë¦­ ìƒì„¸ğŸ”]</h2>
  <canvas id="barChart" width="1100" height="480"></canvas>
  <div id="detailsArea"></div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      console.log("Chart.js ë¡œë“œ í™•ì¸:", typeof Chart !== 'undefined' ? "ì„±ê³µ" : "ì‹¤íŒ¨");
      if (typeof Chart === 'undefined') {
        document.getElementById('detailsArea').innerHTML = "<div class='detail-box'>âŒ Chart.js ë¡œë“œ ì‹¤íŒ¨</div>";
        document.querySelector('.detail-box').style.display = "block";
        return;
      }

      // JSON ë°ì´í„°ë¥¼ ë¬¸ìì—´ì´ ì•„ë‹Œ JavaScript ê°ì²´/ë°°ì—´ ë¦¬í„°ëŸ´ë¡œ ì§ì ‘ í• ë‹¹
      const barData = [{"bar_key": "ê¸°êµ¬ì‘ì—…ë¶ˆëŸ‰ / Leak", "count": 3, "losstime": 40.0}, {"bar_key": "ë¶€í’ˆë¶ˆëŸ‰ / ì™¸ê´€ë¶ˆëŸ‰", "count": 1, "losstime": 35.0}, {"bar_key": "ì„¤ê³„ë¶ˆëŸ‰ / ì„¤ê³„ì˜¤ë¥˜", "count": 2, "losstime": 21.0}];       // ë³€ê²½ë¨: ë”°ì˜´í‘œ ì œê±°, ë³€ìˆ˜ëª… ë³€ê²½
      const detailsDict = {"ê¸°êµ¬ì‘ì—…ë¶ˆëŸ‰ / Leak": {"GAIA-I DUAL": [["Circulation Line Nut ë¶€ Leak ë°œìƒ", "Nut ë¶€ ì¬ì¡°ë¦½", 20.0], ["Circulation ë¼ì¸ NUTë¶€ Leak ë°œìƒ", "Nut ë¶€ ì¬ì¡°ë¦½", 10.0], ["FEMALE CONNECTOR Fitting Nut Leak / HeatExchanger ì—°ê²° PCW-R FEMALE CONNECTOR FC08-12R Fitting Nut ì²´ê²°ê°•", "ì¬ì²´ê²°", 10.0]]}, "ë¶€í’ˆë¶ˆëŸ‰ / ì™¸ê´€ë¶ˆëŸ‰": {"SWS-I": [["Inlet Plate ê°ì¸ ëˆ„ë½", "ìˆ˜ì • í›„ ì…ê³ ", 35.0]]}, "ì„¤ê³„ë¶ˆëŸ‰ / ì„¤ê³„ì˜¤ë¥˜": {"GAIA-I": [["CDA ê³µê¸‰ë‹¨ PFA Tube ê·œê²© í‘œê¸° ì˜¤ë¥˜(ì •ìƒ: 6mm / ì˜¤ë¥˜: 1/4\")", "ë„ë©´ ìˆ˜ì •", 12.0]], "SWS-I": [["Nozzle Flangeì™€ Male Connector ê·œê²© ìƒì´í•˜ì—¬ ì²´ê²° ë¶ˆê°€", "BOM ë° ë„ë©´ ìˆ˜ì •(Fitting Size ë³€ê²½)", 9.0]]}}; // ë³€ê²½ë¨: ë”°ì˜´í‘œ ì œê±°, ë³€ìˆ˜ëª… ë³€ê²½

      // JSON íŒŒì‹± ë‹¨ê³„ê°€ ë” ì´ìƒ í•„ìš” ì—†ìŒ
      // try-catch ë¸”ë¡ì€ ìœ ì§€í•˜ì—¬ ë‹¤ë¥¸ ì ì¬ì  ì˜¤ë¥˜ë¥¼ ì¡ì„ ìˆ˜ ìˆì§€ë§Œ, JSON.parse ê´€ë ¨ ì˜¤ë¥˜ëŠ” ë°œìƒí•˜ì§€ ì•Šì•„ì•¼ í•¨
      if (!barData || !detailsDict) { // ê°„ë‹¨í•œ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬
        console.error("ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨: barData ë˜ëŠ” detailsDictê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        document.getElementById('detailsArea').innerHTML = "<div class='detail-box'>âŒ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨</div>";
        document.querySelector('.detail-box').style.display = "block";
        return;
      }
      
      // ë°ì´í„° ë””ë²„ê¹…
      console.log("barData:", barData);
      const labels = barData.map(r => r['bar_key']);
      const counts = barData.map(r => r['count']);
      console.log("labels:", labels);
      console.log("counts:", counts);

      // (ì´í•˜ JavaScript ì½”ë“œ ë™ì¼í•˜ê²Œ ì‚¬ìš©)
      // ... canvas í™•ì¸ ...
      // ... ì°¨íŠ¸ ì´ˆê¸°í™” (barDataì™€ detailsDictë¥¼ ì§ì ‘ ì‚¬ìš©) ...
      // ... showDetail í•¨ìˆ˜ (detailsDictë¥¼ ì§ì ‘ ì‚¬ìš©) ...
    });
  </script>
</body>
</html>
